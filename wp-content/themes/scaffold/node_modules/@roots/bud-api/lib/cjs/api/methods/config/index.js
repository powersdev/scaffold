"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.config = void 0;
const bud_support_1 = require("@roots/bud-support");
const { isFunction } = bud_support_1.lodash;
const config = function (input) {
    const ctx = this;
    if (!input)
        throw new Error('config input must pass a callback function that returns a webpack configuration');
    ctx.hooks.action('event.build.after', async (app) => {
        app.build.config = isFunction(input)
            ? input(app.build.config)
            : {
                ...app.build.config,
                ...input,
            };
    });
    return ctx;
};
exports.config = config;
