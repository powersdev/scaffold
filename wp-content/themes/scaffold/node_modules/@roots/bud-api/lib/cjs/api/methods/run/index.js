"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.run = exports.pathExistsSync = exports.ensureDirSync = void 0;
const bud_support_1 = require("@roots/bud-support");
exports.ensureDirSync = bud_support_1.fs.ensureDirSync, exports.pathExistsSync = bud_support_1.fs.pathExistsSync;
const run = async function () {
    const ctx = this;
    await ctx.hooks.fire('event.run');
    const production = async () => {
        const compiler = await ctx.compiler.compile();
        compiler.run(ctx.compiler.callback);
    };
    try {
        ctx.isDevelopment ? await ctx.server.run() : await production();
    }
    catch (error) {
        ctx.error(error);
    }
};
exports.run = run;
